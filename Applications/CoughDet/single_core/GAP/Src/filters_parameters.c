/*
 *  Copyright (c) [2024] [Embedded Systems Laboratory (ESL), EPFL]
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */


//////////////////////////////////////////////////////
// Author:          Stefano Albini                  //
// Contributions:   Dimitrios Samakovlis            //
// Date:            September 2023                  //
//////////////////////////////////////////////////////


#include "pmsis.h"

#include "filters_parameters.h"


/* Parameters for the various filters.                      */
/* b and a are the coefficients of the transfer function    */
/* zi are the initial states of the filter                  */
PI_L2 const all_filters_t filters_parameters = {{
	{
		// [50 - 100]
		{ 0.00972234054502324, 0.0, -0.00972234054502324 },
		{ 1.0, -1.9797917771329199, 0.9805553189099537 },
		{ -0.009722340545023333, -0.009722340545023148 }
	},
	{
		// [100 - 150]
		{ 0.009722340545023241, 0.0, -0.009722340545023241 },
		{ 1.0, -1.9782649879387415, 0.9805553189099536 },
		{ -0.009722340545022305, -0.009722340545024157 }
	},
	{
		// [150 - 200]
		{ 0.009722340545023241, 0.0, -0.009722340545023241 },
		{ 1.0, -1.9759755399337173, 0.9805553189099536 },
		{ -0.009722340545022386, -0.009722340545024077 }
	},
	{
		// [200 - 250]
		{ 0.009722340545023238, 0.0, -0.009722340545023238 },
		{ 1.0, -1.9729243157436345, 0.9805553189099535 },
		{ -0.00972234054502282, -0.009722340545023647 }
	},
	{
		// [250 - 300]
		{ 0.009722340545023234, 0.0, -0.009722340545023234 },
		{ 1.0, -1.969112491673501, 0.9805553189099534 },
		{ -0.009722340545023406, -0.009722340545023066 }
	},
	{
		// [300 - 350]
		{ 0.009722340545023236, 0.0, -0.009722340545023236 },
		{ 1.0, -1.964541537254058, 0.9805553189099537 },
		{ -0.009722340545023144, -0.009722340545023326 }
	},
	{
		// [350 - 400]
		{ 0.00972234054502324, 0.0, -0.00972234054502324 },
		{ 1.0, -1.9592132146752452, 0.9805553189099536 },
		{ -0.009722340545023399, -0.009722340545023083 }
	},
	{
		// [400 - 450]
		{ 0.009722340545023252, 0.0, -0.009722340545023252 },
		{ 1.0, -1.9531295781068465, 0.9805553189099535 },
		{ -0.009722340545023135, -0.009722340545023364 }
	},
	{
		// [450 - 500]
		{ 0.009722340545023233, 0.0, -0.009722340545023233 },
		{ 1.0, -1.946292972906566, 0.9805553189099532 },
		{ -0.00972234054502326, -0.009722340545023203 }
	},
	{
		// [500 - 550]
		{ 0.00972234054502325, 0.0, -0.00972234054502325 },
		{ 1.0, -1.93870603471585, 0.9805553189099534 },
		{ -0.009722340545023257, -0.009722340545023243 }
	},
	{
		// [550 - 600]
		{ 0.009722340545023227, 0.0, -0.009722340545023227 },
		{ 1.0, -1.9303716884437947, 0.9805553189099537 },
		{ -0.009722340545023194, -0.00972234054502326 }
	},
	{
		// [600 - 650]
		{ 0.009722340545023238, 0.0, -0.009722340545023238 },
		{ 1.0, -1.9212931471395387, 0.9805553189099536 },
		{ -0.00972234054502319, -0.009722340545023283 }
	},
	{
		// [650 - 700]
		{ 0.009722340545023255, 0.0, -0.009722340545023255 },
		{ 1.0, -1.9114739107535734, 0.9805553189099537 },
		{ -0.009722340545023227, -0.009722340545023283 }
	},
	{
		// [700 - 750]
		{ 0.009722340545023233, 0.0, -0.009722340545023233 },
		{ 1.0, -1.900917764788443, 0.9805553189099534 },
		{ -0.009722340545023229, -0.009722340545023236 }
	},
	{
		// [750 - 800]
		{ 0.009722340545023224, 0.0, -0.009722340545023224 },
		{ 1.0, -1.8896287788393629, 0.9805553189099536 },
		{ -0.009722340545023234, -0.009722340545023215 }
	},
	{
		// [800 - 850]
		{ 0.009722340545023257, 0.0, -0.009722340545023257 },
		{ 1.0, -1.8776113050253118, 0.9805553189099536 },
		{ -0.009722340545023269, -0.009722340545023246 }
	},
	{
		// [850 - 900]
		{ 0.009722340545023226, 0.0, -0.009722340545023226 },
		{ 1.0, -1.8648699763112082, 0.9805553189099536 },
		{ -0.009722340545023234, -0.009722340545023219 }
	},
	{
		// [900 - 950]
		{ 0.009722340545023243, 0.0, -0.009722340545023243 },
		{ 1.0, -1.8514097047218137, 0.9805553189099536 },
		{ -0.009722340545023264, -0.009722340545023224 }
	},
	{
		// [950 - 1000]
		{ 0.00972234054502325, 0.0, -0.00972234054502325 },
		{ 1.0, -1.8372356794480538, 0.9805553189099534 },
		{ -0.009722340545023259, -0.009722340545023241 }
	},
}};



// Parameters of the second filter used in the EEPD function. These are the same for every band
PI_L2 const float b_second[3] = { 3.844633506752846e-06, 7.689267013505692e-06, 3.844633506752846e-06 };
PI_L2 const float a_second[3] = { 1.0, -1.9944464105419268, 0.9944617890759538 };

PI_L2 const float zi_second[2] = { 0.9999961553614867, -0.9944579444374683 };
